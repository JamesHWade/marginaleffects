---
title: "Supported Models"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Supported Models}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Adjusted predictions and marginal means

Under the hood, `marginaleffects`'s `predictions` function uses the `insight` package to retrieve adjusted predictions from a wide variety of models. Currently, `insight` [supports over many model types](https://easystats.github.io/insight/), and most should work out-of-the-box with the `predictions` function. If you run into problems, do not hesitate to report them on Github or via email.

# Marginal effects and contrasts

This table shows the list of models supported by the `marginaleffects` function, and shows which numerical results -- marginal effects (dY/dX) or standard errors (Std. Error) -- have been checked against alternative software packages: Stata's `margins` command and R's `margins` package. Empty cells mean that the results of a model have not yet been validated against external software. Green cells indicate that the results of [at least one model from the test suite](https://github.com/vincentarelbundock/marginaleffects/tree/main/tests/testthat) match to a reasonable tolerance. Red cells mean that `marginaleffects` results do *not* match those produced by alternative software packages. Obviously, caution is especially warranted when working with estimates from red cells.

I am *very* eager to add support for new models. Feel free to file a request on Github or -- even better -- submit some code.

Warning: When using `marginaleffects` with different models, you will probably have to adjust the `type` argument. Refer to the documentation of your modeling package to see what `type` argument is allowed in the `predict` function. 

```{r, echo = FALSE, message = FALSE, warning = FALSE}
library("data.table")
library("kableExtra")

supported_models <- read.csv("https://raw.githubusercontent.com/vincentarelbundock/marginaleffects/main/data-raw/supported_models.csv", check.names = FALSE, encoding = "utf8")

tmp <- supported_models
for (i in nrow(tmp):2) {
    if (tmp$Package[i] == tmp$Package[i - 1]) {
        tmp$Package[i] <- ""
    }
}

colnames(tmp) <- c("Package",
                   "Function",
                   "dY/dX",
                   "SE",
                   "dY/dX ",
                   "SE ",
                   "dY/dX  ",
                   "SE  ",
                   "dY/dX   ",
                   "SE   ")

f <- function(x) fcase(is.na(x), "grey", x == TRUE, "green", x == FALSE, "red")
idx <- lapply(tmp, f)

for (i in 3:ncol(tmp)) {
    tmp[[i]] <- as.character(tmp[[i]])
    tmp[[i]] <- fcase(tmp[[i]] == "TRUE", "✓",
                      tmp[[i]] == "FALSE", "✖",
                      tmp[[i]] == "U", "U",
                      default = "")
}

# kableExtra
tab <- kbl(tmp, align = c("l", "l", rep("c", 8)), full_width = FALSE)
tab <- kable_styling(tab)
for (i in 3:ncol(tmp)) {
    tab <- column_spec(tab, column = i, color = idx[[i]])
}
for (i in 1:nrow(tmp)) {
    tab <- row_spec(tab, row = i)
}
tab <- add_header_above(tab, c(" " = 2, "Supported" = 2, "Stata" = 2, "margins" = 2, "emtrends" = 2))
tab <- add_header_above(tab, c(" " = 4, "Numerical equivalence" = 6))
tab
```
